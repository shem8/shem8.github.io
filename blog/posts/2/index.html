
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>80/20</title>
  <meta name="author" content="Shem Magnezi">

  
  <meta name="description" content="80/20
Startup, Coding and bear on the beach. about me Run Fast, Fall Frequently, Get Up Faster and Go Drink Beer at the Beach: What It's Like to &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://shem8.github.io/blog/posts/2">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="80/20" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  

</head>

  <body>
    <a href="/" class="home-icon">
      <img src="/images/home.png"/>
    </a>

    <div class="home-page">
  <div class="hero">
    <h1>80/20</h1>
<p>Startup, Coding and bear on the beach.</p>

  </div>

  <div class="home-field">
    <div class="home-landing her-row">
      <div class="container">
        <div class="row">
          <div id="about-me" class="col-md-offset-3 col-md-6">
  <h4>about me</h4>
  <p></p>
  <div class="social-icon-list">
  	
    <a title="Twitter" href="https://twitter.com/shemag8"><img src="/images/glyphicons_social_31_twitter.png"/></a>
    
    
    <a title="GitHub" href="https://github.com/shem8"><img src="/images/glyphicons_social_21_github.png"/></a>
    
    
    
  </div>
</div>

        </div>
      </div>
    </div>

    <div class="article-list">
      <div class="container">
        
          
          <div class="row">
            <div class="col-md-offset-3 col-md-6">
              <article>
  <h2><a href="/blog/2015/11/15/run-fast-fall-frequently-get-up-faster-and-go-drink-beer-at-the-beach-what-its-like-to-work-at-a-startup/">Run Fast, Fall Frequently, Get Up Faster and Go Drink Beer at the Beach: What It's Like to Work at a StartUp</a></h2>
  
  <p>
    <p><em>Over the past 3 years I&rsquo;ve been working at </em><a href="http://myroll.com/"><em>MyRoll</em></a><em> (previously called Flayvr, the startup that loves you photos as much as you do</em>).<em> I joined right after the seed stage and I was the first employee ofthe company. This was my first time working at a startup and it&rsquo;s hands-down one of the best experiences I&rsquo;ve had in my not-so-long life. Lately, more and more of my friends have asked me: &ldquo;Should I join a startup, or just go corporate - something that&rsquo;s financially stable?&rdquo;. <strong>
</strong>First- I want to clear the water and say that I don&rsquo;t really have an answer for that.  It really depends on the type of person you are. However, these is my 2 cents about all the </em><strong><em>GOOD</em></strong><em> of working in a small startup (Don&rsquo;t worry, there&rsquo;s plenty of bad as well - coming soon):</em></p>




<h2>1. You learn fast (because you don&rsquo;t have a choice)</h2>




<p>On my very first day at MyRoll I was given the task of writing a feature in our iOS app. It was my first time writing code for Mobile, first time working on objectiveC, first time working on a Mac, first time working with git, AND first time reading our code. There was no one-month boot camp, no onboarding powerpoints, no tutorials, and ZERO team members to pair program or review my code. Just the internet and the CTO that wrote the MVP for demo. A week later I had to add some app analytics to write to the DB so I had, in turn, to learn rails (from zero). A year later I was the one that started developing our Android app.</p>




<p>Jumping on the horse and learning how to ride, time after time, over and over again, each time with a different type of horse (or ride? I lost myself in the analogy), makes you develop a real capability for learning new things (no matter what they are). You learn to predict the pitfalls, you know where things are going be more tricky and you develop some sense about what’s right and wrong in what you&rsquo;re doing.</p>




<h2>2. You go for the impossible, because the possible things are already there</h2>




<p>Before we started working on Flayvr, people treated photos as isolated items. Our first goal was therefore  to find the context of the user&rsquo;s media and create a full meaningful story from it. So we took Ron’s, our CEO, endless photos stream and started to analyze it (I know this guy for 3 years but through his photos I also know how his trip to Barcelona in 2005 was&hellip;). We analyzed it manually and understood how 2 photos are connected to the same scene or event, we went over on different end cases and built some pretty solid algorithms to cluster his photos and videos.</p>




<p>Than we asked some friends to test our algorithm on their stream. It was pretty bad&hellip; Ron had 2 kids and he literally records every second in their life - my friends, on the other hand, are party people that have tons of Whatsapp photos that are unrelated to one another. It looked like every person has his own unique stream, and it felt too complicated for a computer to just magically understand it.</p>




<p>Back to the drawing board - we categorized our main users. We understood that we have different kinds of people and they are all different, but that we can easily adapt our algorithm to each one: Android or iPhone users? Are they taking a lot of photos or just getting sent 4-5 photos in Whatsapp? is she a professional photographer or a 13 years old selfie taker? etc..</p>




<p>We then tweaked our algorithm (and are still making it better and better, there is no magic solution here) and actually arrived at some pretty solid results.</p>




<p><strong>Why? Because he had no alternatives </strong>- it was either about delivering a good damn product or giving back our investors their money.</p>




<h2>3. You break things. A lot!</h2>




<p>When moving fast you sometimes fall, just like a new baby born child. In the beginning you are going to  fall a lot, but slowly you learn how to put one leg in front of the other, you learn to keep your balance and in the end you are running smoothly.</p>




<p>[caption id=&ldquo;&rdquo; align=&ldquo;alignright&rdquo; width=&ldquo;352&rdquo;]<img src="http://c2.thejournal.ie/media/2013/04/falling-off-catwalk.gif" alt="" /> Pushing to production on 1AM on Friday.[/caption]</p>




<p>At first, releasing a new version was a big deal. We had a release doc with a couple of stages that you had to be checked: making sure you&rsquo;re working with the production env, testing it on a couple of devices, checking for updates and fresh install, etc&hellip; That took some time, and as we gained confidence the release cycle got shorter and we started  pushing a new version to our users 2-3 times a week (and sometimes even more).</p>




<p>But even the adults fall sometimes, and we did have some bad deploys. Shit happens, you must accept that. If Facebook is uploads a new version of the app that crashes for 10% of the users right on start,  the result will be a twitter storm. Or if <a href="http://mashable.com/2015/07/01/google-photos-black-people-gorillas/">google computer vision miserably fails </a>- you will see it all over the net. But in our case we realized we have the time to fix, and users are more tolerant towards our mistake.</p>




<h2>4. You aren’t afraid from failures</h2>




<p>Further to my last point - because of the uncertainty and the risk- taking nature of startups, you will fail often. From time to time, you learn to live with all those failures and instead of being upset after each one you learn to embrace it. You understand that each failure makes you a bit smarter: your estimation should be done more carefully, you now know your users don&rsquo;t like the red color, etc&hellip;</p>




<blockquote>_“When we give ourselves permission to fail, we, at the same time, give ourselves permission to excel.”_

_- Eloise Ristad_</blockquote>




<p>With that in mind - you think more about the process and less about the results.</p>




<h2>5. You understand the power of UX, marketing, etc&hellip;</h2>




<p>In my previous job I was one of 6 developers in 3 dev teams in our department. There were two outsourced designers that I never talked with, 3 product managers that I saw only during planning sessions, and a sales team, somewhere, maybe in the US or maybe one floor above, I&rsquo;m not really sure.</p>




<p>As a server side programmer I never took UX too seriously. I was sure that if the feature is important enough, users are going to use it. I was sure that if we, the devs guys, are going to kick a hell good full product - users will love it. I was sure that there was some secret way that they are going to find it and magically understand how to use all features right off the bat.</p>




<p>I was stupid. UX guys made our users understand our flows, product guys taught us <a href="https://shem8.wordpress.com/2015/08/24/know-what-not-to-build-droidcon-2015/">what not to build</a> and saved us tons of time, our super hero marketing guy brought us to the first place on <a href="http://www.producthunt.com/tech/gallery-doctor-2-0">producthunt</a> and let a huge crowd discover our app right on the first day on launch. A tech product is just like other product, the tech part is just a small piece of the puzzle, so don&rsquo;t feel too special.</p>




<h2>6. You embrace competition</h2>




<p>On the day iOS 7 was released we got many messages from friends. They were all like  "oh not cool, apple just implemented your app in the default photos app, sorry for you guys". We were a bit afraid, and at first we thought &ldquo;ok, we have no chance here&rdquo;. But it turned out to be a good move for us. First - we got some nice free <a href="http://m.blog.laptopmag.com/obsolete-ios-apps?slide=2">PR</a> during the first few days. Second, users started to understand how much this feature was important when browsing their photos and started to look for a dedicated app for that, and we indeed got more downloads over the following months.</p>




<p>Same happened when Dropbox Carousel launched and with Google photos. When the big companies enter the arena you should start to worry, but you should also be flattered, because that means that there is something worth fighting about, and in today’s world - there is plenty of room for you too there.</p>




<blockquote>**Remember: if the Gorilla is blowing down your neck - that means you're on the right track, just run faster =)**</blockquote>




<h2>7. You forget about your comfort zone</h2>




<p>Here is some very small taste of the things that I had the privilege to do over the last 3 years. All are things  that I&rsquo;ve never done before:
<img src="http://cosmic-fitness.com/wp-content/uploads/2015/03/comfort-zone-300x206.jpg" alt="" /></p>




<ul>
<li><p>I gave 2 talks on 2 different DroidCon conferences (The biggest Android conference around)</p></li>
<li><p>I delivered tens of pitches in English as part of our startup booth in conferences</p></li>
<li><p>I went over couple to absolute strangers in the middle of the street and asked them to play with our app, just to gather some feedback</p></li>
<li><p>I emailed hundreds of users, closed support tickets and solved their issues</p></li>
<li><p>I went over to the home of one of our investors and worked with her on fixing an issue she had with the app</p></li>
<li><p>I interviewed candidates applying for the company</p></li>
<li><p>I started writing my blog :)</p></li>
</ul>




<h2>8. Nobody is going tell you not to come with flip flops or that the CEO is coming tomorrow so you have to look like you’re working at 8AM</h2>




<p><img src="https://shem8.files.wordpress.com/2015/10/edit.jpg?w=660" alt="edit" /></p>




<p>Yup, you&rsquo;re able to start every Thursday with yoga on the beach and swimming in the sea, and we actually did it.</p>




<hr />




<p>Looks like start-up life is all fun and games , but it&rsquo;s not. It&rsquo;s more like a roller coaster. The ride will take you to some new heights but you are also going to get lots of downs and falls (and I hope I&rsquo;ll write a blog post about it soon). But for all those who want my advice about which one is better - it&rsquo;s more about what kind of person you are and what do you want to achieve. Those small companies that are moving fast are great for learning new things and gaining experience on stuff you probably wouldn&rsquo;t do in a bigger company, but it&rsquo;s also very stressful and chaotic, and you have to be ready for this ride.</p>




<p>As said, I’ve been in these ride over the past 3 years, I can’t say I’ve enjoy every second of it but when looking back, I can’t imagine how far I got and how much I gained from this adventure.</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2015-11-15T12:24:22+02:00" pubdate data-updated="true"></time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/life/'>life</a>, <a class='category' href='/blog/categories/posts/'>posts</a>
  
</span>


  </span>

  
</article>

            </div>
          </div>
        
          
          <div class="row">
            <div class="col-md-offset-3 col-md-6">
              <article>
  <h2><a href="/blog/2015/10/02/pimp-up-your-splash-screen/">Pimp-up Your Splash Screen</a></h2>
  
  <p>
    <p>In the past, splash screen in Android was a dirty word, It was usually a bad sign to an app that was converted from iPhone. But lately- Google added <a href="https://www.google.com/design/spec/patterns/launch-screens.html">launch screens</a> to the design guidelines, and maybe they changed the name, <a href="http://www.androiduipatterns.com/2015/08/splash-screen-with-any-other-name-is.html?m=1">but the concept is still the same</a>.</p>




<p>Splash screen- Good or Bad debate aside, in <a href="https://play.google.com/store/apps/details?id=shem.getit&amp;hl=en">Ripples</a> I decided to go with the Google guidelines and do my own splash screen, but no just a simple one with the app logo, I wanted to do something different.</p>




<p>A couple of words about Ripples to the ones who don&rsquo;t know- It&rsquo;s a very simple app that all about little circles that slowly reveals and getting bigger. So what I thought is revealing the Ripples logo in the splash screen with some ripples animations in some masking-like way:</p>




<p><a href="https://shem8.files.wordpress.com/2015/09/crop.gif"><img src="https://shem8.files.wordpress.com/2015/09/crop.gif" alt="crop" /></a>The easiest way to do it is just taking this gif and put it in the splash screen, but I&rsquo;m not gonna do it because:</p>




<ol>
<li><p>It&rsquo;ll make this blog post to a pretty short and pointless</p></li>
<li><p>It will add a lot of resources to the app and make it bigger with no reason</p></li>
<li><p>We won&rsquo;t learn anything new</p></li>
</ol>




<p>So how we gonna do it? With some basic and easy Android drawing methods!</p>




<p>First lets build the splash view with the image, It&rsquo;s a simple view that just load the bitmap and give the view the same size as the bitmap, pay attention that we not displaying anything yet:</p>




<p>[code language=&ldquo;java&rdquo;]
public class SplashView extends View {
    private Bitmap bitmap;</p>




<pre><code>public SplashView(Context context) {
    super(context);
    init();
}

private void init() {
    bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.logo);
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    int w = MeasureSpec.makeMeasureSpec(bitmap.getWidth(), MeasureSpec.EXACTLY);
    int h = MeasureSpec.makeMeasureSpec(bitmap.getHeight(), MeasureSpec.EXACTLY);
    super.onMeasure(w, h);
}
</code></pre>




<p>}
[/code]</p>




<p>Now lets start drawing our graphic- We'll draw some masking over the logo bitmap:</p>




<p>[code language=&ldquo;java&rdquo;]
@Override
protected void onDraw(Canvas canvas) {
    float d = 1 / 0.4f;
    float v = sizeAnimator.getAnimatedFraction();</p>




<pre><code>Path path = new Path();
float rad = 0.56f * bitmap.getHeight();
path.addCircle((int)(0.08 * bitmap.getWidth()), (int)(0.32 * bitmap.getHeight()), rad * Math.min(d * v, 1), Path.Direction.CW);
path.addCircle((int)(0.2 * bitmap.getWidth()), (int)(0.47 * bitmap.getHeight()), rad * Math.min(d * (v - 0.1f), 1), Path.Direction.CW);
path.addCircle((int)(0.33 * bitmap.getWidth()), (int)(0.49 * bitmap.getHeight()), rad * Math.min(d * (v - 0.2f), 1), Path.Direction.CW);
path.addCircle((int)(0.5 * bitmap.getWidth()), (int)(0.49 * bitmap.getHeight()), rad * Math.min(d * (v - 0.3f), 1), Path.Direction.CW);
path.addCircle((int)(0.63 * bitmap.getWidth()), (int)(0.35 * bitmap.getHeight()), rad * Math.min(d * (v - 0.4f), 1), Path.Direction.CW);
path.addCircle((int)(0.76 * bitmap.getWidth()), (int)(0.49 * bitmap.getHeight()), rad * Math.min(d * (v - 0.5f), 1), Path.Direction.CW);
path.addCircle((int)(0.93 * bitmap.getWidth()), (int)(0.49 * bitmap.getHeight()), rad * Math.min(d * (v - 0.6f), 1), Path.Direction.CW);
canvas.clipPath(path);
canvas.drawBitmap(bitmap, 0, 0, null);
</code></pre>




<p>}
[/code]</p>




<p>Please ignore the constants value all over the place, those are parameter that I&rsquo;ve played with (things that you can&rsquo;t do if you chose to implement it with gif!) while making the animation. The important things are how we creating a new path (that built from circles) and clipping the canvas to this path so this what will gonna be visible eventually. After setting to mask for the canvas we just need to draw the bitmap.</p>




<p>Now we just need to put the animation:</p>




<p>[code language=&ldquo;java&rdquo;]
private void init() {
    &hellip;
    sizeAnimator = ValueAnimator.ofFloat(0, 0.8f);
    sizeAnimator.setDuration(2500);
    sizeAnimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {
        @Override
        public void onAnimationUpdate(ValueAnimator animation) {
            invalidate();
        }
    });
}</p>




<p>public void start() {
    sizeAnimator.start();
}
[/code]</p>




<p>And that&rsquo;s it:</p>




<p><a href="https://shem8.files.wordpress.com/2015/09/output.gif"><img src="https://shem8.files.wordpress.com/2015/09/output.gif" alt="output" /></a></p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2015-10-02T12:03:17+03:00" pubdate data-updated="true"></time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/android/'>android</a>, <a class='category' href='/blog/categories/posts/'>posts</a>
  
</span>


  </span>

  
</article>

            </div>
          </div>
        
          
          <div class="row">
            <div class="col-md-offset-3 col-md-6">
              <article>
  <h2><a href="/blog/2015/09/11/affectively-reading/">Effectively Reading</a></h2>
  
  <p>
    <p><em>The internet is full of great pieces of knowledge. Starting from <a href="http://www.wired.com/2014/10/cheating-video-poker">amazing stories</a> and ending with some <a href="http://www.marcandangel.com/2014/07/06/12-quiet-rituals-of-enormously-successful-humans/">tips from the pros</a>. But because now days <a href="https://shem8.wordpress.com">every shitty twitter user that have a keyboard can open a blog</a> the internet is also full of garbage and texts that not worth your time, and on the other hand you always feel that you missing something, So what can we do?</em></p>




<p>In this post I&rsquo;ll share with you my experience and my reading habits that I&rsquo;ve developed recently to maximize my reading time by reading exactly what I need and without afraid I&rsquo;m loosing something out there.</p>




<p><strong><em>When I refer to &ldquo;reading&rdquo; on this post I refer to texts on the internet, especially blog posts or interesting articles. I&rsquo;m not talking about books (I hope I&rsquo;ll get to it on another post) or some news content that are not relevant if you read it a month later</em></strong></p>




<hr />




<p>Once upon a time I&rsquo;ve consume all my content via my social networks. First- it was Facebook, my friends were sharing some interesting links and I read them immediately (If I had a minute or two). Fast enough, Facebook algorithm started prioritize media over content, and my Facebook became mix of babies, dogs and oh-look-at-me-I-am-in-a-pool-party feed.</p>




<p>[caption id=&ldquo;&rdquo; align=&ldquo;alignright&rdquo; width=&ldquo;356&rdquo;]<img src="http://i2.wp.com/www.ladycarcar.vn/wp-content/uploads/internet1.jpg?resize=356%2C193" alt="" /> Source: <a href="http://www.ladycarcar.vn/mat-tu-vi-su-dung-cong-nghe/">http://www.ladycarcar.vn/mat-tu-vi-su-dung-cong-nghe/</a>[/caption]</p>




<p>That&rsquo;s when I decided to move to Twitter, and that sure was a mistake. Don&rsquo;t get me wrong, Twitter is the best way out there to know what going out right NOW (I barely visiting news sites any more), it is a great platform to meet new people or to get help. But it not that good for discovering some good content, mainly because the users there prefer to keep things short and light.</p>




<p>In that point I went back to the drawing board, things was not worked for me. I had hard time following blogs that was importing for me (instead of reading the last post when it was released via RSS, I visited the blog once in a while and read all the posts I&rsquo;ve missed). I didn&rsquo;t have time to read those links on Facebook and finding them later was impossible. And when I finally had time I didn&rsquo;t had any way to explore new cool content.</p>




<h2>Step 1: Create your reading ritual</h2>




<p>Reading demand some certain state of mind. For me, for example, reading on my smartphone didn't worked so well, because it&rsquo;s too small and also because there are so many notifications and I lost my focus easily. After trying all kinds of things it look like my (wife&rsquo;s) iPad works the best. It also works great for me because I&rsquo;m doing my reading as part of my <a href="http://stevecorona.com/morning-rituals-1-10-1000/">morning ritual</a> so I don&rsquo;t have to grab it with me elsewhere. So my reading ritual is on the morning with a cup a tea, looking at the sea from my living room window with an iPad to read.</p>




<h2>Step 2: Find your platform</h2>




<p>Now you need to build some mechanism for saving your reading queue. I&rsquo;m using <a href="https://getpocket.com">Pocket</a> and I really think it is the best one out there. What&rsquo;s important from this platform is:</p>




<ol>
<li><p>Easy to insert (add to the queue)</p></li>
<li><p>Easy to pull (get the next for reading)</p></li>
<li><p>It is also nice to have some tagging, sharing and search functionality.</p></li>
</ol>




<p>Pocket surly served the first 2 items: there is a <a href="https://chrome.google.com/webstore/detail/save-to-pocket/niloccemoadcdkdjlinkgdfekeahmflj?hl=en">chrome extension</a>, and android app that let you add articles quickly, and an app for almost all platforms for reading.</p>




<p>Make sure that you have one and only platform and all the content you consume should be from there. Even if you saw something on Facebook, or a friend send some link on mail- add it to your reading list and read it from there, I&rsquo;ll explain why in the next step:</p>




<h2>Step 3: Fill some content</h2>




<p>So now we have all the infrastructure ready, how do we put something in? I will divide it to 3:</p>




<ol>
<li><p>Your direct channels- Those are the posts that you know that you don&rsquo;t wanna miss, like important blogs or interesting medium users. You want all those posts will be added automaticity to your platform.</p></li>
<li><p>Specific aggregator/ digested list- This one is tricky. In &ldquo;The Tipping Point" Malcolm Gladwell says that on most of the times, it&rsquo;s better to ask a maven instead of learning things on yourself. If you, like me, can&rsquo;t handle all the blogs out there, not knowing all the bloggers and sites- find your maven that will send you the most important things out there.</p></li>
<li><p>Recommendation engine- This one is the best for exploring some new stuff that not necessary fit to your main interest. This can be some algorithm that based on the crowd source or you personal taste (or better- both). That&rsquo;s why it&rsquo;s important to manage all your reading thought the same platform to give it as much information as possible for future learning.</p></li>
</ol>




<p>Those 3 aspects should fill some nice and variety reading list. Here is my reading list:</p>




<ol>
<li><p>As Android developer- the <a href="http://android-developers.blogspot.co.il/">Android blog</a> is really important to me and I want to know on any additional API or new features there is. I&rsquo;m also interested on every thing <a href="https://medium.com/@chethaase">Chet Haase</a> is publishing. And with <a href="https://ifttt.com/">IFTTT</a> it easily added to my pocket every time new item is publish.</p></li>
<li><p>3 years ago I discover the wonderful <a href="http://softwareleadweekly.com/">software lead weekly</a> project, I&rsquo;m getting 1 weekly mail with the most interesting stuff out there about startup culture and leadership. And thanks to the awesome <a href="https://twitter.com/orenellenbogen">Oren Ellenbogen</a> there is a simple &lsquo;Add to pocket&rsquo; option.</p></li>
<li><p>Pocket is doing amazing work here, and send me every week couple of articles that might interesting me (I say amazing because it&rsquo;s pretty accurate). Lately I also started using medium, and it&rsquo;s recommendation emails are nice too.</p></li>
</ol>




<h2>Step 4: Find your pace</h2>




<p>I know lots of people that did it all but their Pocket app is just an endless list. They keep adding some stuff and never got to read half of them, soon enough they give up because they know there is no chance they gonna keep the pace. Start with small amount of articles, it&rsquo;s better to have an empty list and not a too long one that will make you give up. After you will make it an habit it will be easier to add more stuff, so you always need to iterate between step 3 and 4.</p>




<p>For me- I started with reading around a few articles in the end of the week. That was build by 2 or 3 from the &ldquo;software lead weekly&rdquo; mail and maybe 2 more from the pocket mail. Step by step I increase my reading capacity and now I&rsquo;m reading 3 articles a day = 15 a week. And adding around the same amount (Android= 3, software lead weekly= 4-5, Pocket= 4-5, medium= 3-4).</p>




<hr />




<p>It took me couple of years but I really feel like my reading ritual helped me learn a lot of new things (about Android, tech and also on some other things that I&rsquo;ve never read about). Yes- of course, I still sometimes facing some &ldquo;What the hell I&rsquo;ve just read in the last 4 minutes&rdquo; moments, or skipping some important announcements because I don&rsquo;t have time. But you know- you can&rsquo;t always win the internet, winning 80% of the time is fine with me =)</p>




<p><em>Cover photos by: <a href="http://20px.com/blog/2013/03/31/how-i-feel-when-i-put-stuff-on-the-internet/#.VfLQrZ2qqko">twenty pixels</a></em></p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2015-09-11T18:16:35+03:00" pubdate data-updated="true"></time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/life/'>life</a>, <a class='category' href='/blog/categories/posts/'>posts</a>
  
</span>


  </span>

  
</article>

            </div>
          </div>
        
          
          <div class="row">
            <div class="col-md-offset-3 col-md-6">
              <article>
  <h2><a href="/blog/2015/09/04/android-drag-and-drop/">Android Drag and Drop</a></h2>
  
  <p>
    <p><em>Although Android system has a very good <a href="http://developer.android.com/guide/topics/ui/drag-drop.html">built-in drag &amp; drop mechanism</a>, I seeing lots of libraries that just duplicate this behaviour, or users that hack they way for building drag &amp; drop on their apps. In this blog post I will explain how to implement a simple drag &amp; drop functionality between different views with a very small amount of code.</em></p>




<h1>0. Setup</h1>




<p>For our example we gonna build a simple 3x3 grid with a numbers from 1 to 9. Than the user will be able to drag and drop between those numbers and the result will be the multiplication of this 2 values on the dropped view.</p>




<p>So first, let build our view with the numbers:</p>




<p>[code language=&ldquo;xml&rdquo;]
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools" android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="20dp"
    tools:context=".MainActivityFragment"></p>




<pre><code>&lt;TextView
    android:id="@+id/text1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="1"
    android:textSize="40sp"
    android:layout_gravity="left|top" /&gt;

&lt;TextView
    android:id="@+id/text2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="2"
    android:textSize="40sp"
    android:layout_gravity="center_horizontal|top" /&gt;

&lt;TextView
    android:id="@+id/text3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="3"
    android:textSize="40sp"
    android:layout_gravity="right|top" /&gt;

&lt;TextView
    android:id="@+id/text4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="4"
    android:textSize="40sp"
    android:layout_gravity="left|center_vertical" /&gt;

&lt;TextView
    android:id="@+id/text5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="5"
    android:textSize="40sp"
    android:layout_gravity="center" /&gt;

&lt;TextView
    android:id="@+id/text6"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="6"
    android:textSize="40sp"
    android:layout_gravity="right|center_vertical" /&gt;

&lt;TextView
    android:id="@+id/text7"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="7"
    android:textSize="40sp"
    android:layout_gravity="left|bottom" /&gt;

&lt;TextView
    android:id="@+id/text8"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="8"
    android:textSize="40sp"
    android:layout_gravity="center_horizontal|bottom" /&gt;

&lt;TextView
    android:id="@+id/text9"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="9"
    android:textSize="40sp"
    android:layout_gravity="right|bottom" /&gt;
</code></pre>




<p></FrameLayout>
[/code]</p>




<h1>1. Dragging</h1>




<p>We&rsquo;ll setup each view to be draggable on long click:</p>




<p>[code language=&ldquo;java&rdquo;]
view.setOnLongClickListener(new View.OnLongClickListener() {
    @Override
        public boolean onLongClick(View v) {
            ClipData data = ClipData.newPlainText(&ldquo;value&rdquo;, view.getText());
            view.startDrag(data, new View.DragShadowBuilder(v), null, 0);
            return true;
        }
    });
}
[/code]</p>




<p>Couple of things to pay attention:</p>




<ul>
<li><p>We should pass the data of the view value to the drag and drop event for later use (to calculate the multiplication), we&rsquo;re doing it by using <a href="http://developer.android.com/reference/android/content/ClipData.html">ClipData</a>.</p></li>
<li><p>We should show some indication about the dragging- that&rsquo;s what the <a href="http://developer.android.com/reference/android/view/View.DragShadowBuilder.html">DragShadowBuilder</a> for, by default he&rsquo;s drawing the view image on dragging position. You can use it for drawing another image or some other indication.</p></li>
<li><p>When we&rsquo;re ready we call startDrag. Yap, that&rsquo;s simple.</p></li>
</ul>




<h1>2. Dropping</h1>




<p>Now for the other side of the Drag&amp;Drop- the drop. Again, we&rsquo;ll setup each view with a drag listener:</p>




<p>[code language=&ldquo;java&rdquo;]
        view.setOnDragListener(new View.OnDragListener() {
            @Override
            public boolean onDrag(View v, DragEvent event) {
                switch(event.getAction()) {
                    case DragEvent.ACTION_DRAG_STARTED:
                        return true;</p>




<pre><code>                case DragEvent.ACTION_DRAG_ENTERED:
                    v.setBackgroundColor(Color.LTGRAY);
                    return true;

                case DragEvent.ACTION_DRAG_LOCATION:
                    return true;

                case DragEvent.ACTION_DRAG_EXITED:
                    v.setBackgroundColor(Color.TRANSPARENT);
                    return true;

                case DragEvent.ACTION_DROP:
                    v.setBackgroundColor(Color.TRANSPARENT);
                    int dragVal = Integer.parseInt(event.getClipData().getItemAt(0).getText().toString());
                    int viewVal = Integer.parseInt(((TextView) v).getText().toString());
                    ((TextView) v).setText("" + (dragVal + viewVal));
                    return true;

                case DragEvent.ACTION_DRAG_ENDED:
                    return true;

                default:
                    break;
            }
            return false;
        }
    });
</code></pre>




<p>[/code]</p>




<p>OMG THAT&rsquo;S SO MUCH CODE! AND WITH A SWITCH CASE!! YOU PROMISE IT SHOULD BE SIMPLE!!!
Ok ok, please calm down, take a glass of bear and sit down. Actually the drag handling is pretty simple there just a bit of boilerplate code (cause you know, java&hellip;)</p>




<p>Lets&rsquo;s go over all the actions in the drag event we should handle <strong>(remember, this listener is on the dropped view and all those actions related to this view, please don&rsquo;t confused between the dragged view and the dropped view):</strong></p>




<ul>
<li><p>ACTION_DRAG_STARTED- that&rsquo;s mean that there is some other view in the screen that is start dragging. If we want this other view will be able to be dropped on our view we should return &ldquo;true&rdquo;, if we&rsquo;ll return &ldquo;false&rdquo; all the dragging and dropping flow won&rsquo;t be relevant (and the related events won&rsquo;t be delivered).</p></li>
<li><p>ACTION_DRAG_ENTERED- the dragged view was entered to our view area, usually we should show some indication here (like changing the background color on our case)</p></li>
<li><p>ACTION_DRAG_LOCATION- that&rsquo;s mean that the dragging view is changing his location within our view area, not much to do here, so just ignore.</p></li>
<li><p>ACTION_DRAG_EXITED- the dragged view was exited from our view area, again- indication should be show here.</p></li>
<li><p>ACTION_DROP- an actual drop was committed on our view! Now&rsquo;s the time to do your logic (for our case putting the right value in the text box). Don&rsquo;t forget to reset your indication from the ACTION_DRAG_ENTERED event!</p></li>
<li><p>ACTION_DRAG_ENDED- the drag and drop flow was ended, but not on our view ( =( ). Again, not relevant on our case so we just ignore.</p></li>
</ul>




<p>Pretty simple right? This is how this should look like:</p>




<p><a href="https://shem8.files.wordpress.com/2015/09/draganddrop.gif"><img src="https://shem8.files.wordpress.com/2015/09/draganddrop.gif?w=180" alt="draganddrop" /></a></p>




<p>You can also find the full project source code in <a href="https://github.com/shem8/AndroidDragAndDrop">my github</a></p>




<p>_Credit for cover image: <a href="http://genius.com/1699408/Major-lazer-bubble-butt/I-aint-snoop-dogg-but-imma-drop-it-like-its-hot_">http://genius.com/1699408/Major-lazer-bubble-butt/I-aint-snoop-dogg-but-imma-drop-it-like-its-hot_</a></p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2015-09-04T15:10:43+03:00" pubdate data-updated="true"></time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/android/'>android</a>, <a class='category' href='/blog/categories/posts/'>posts</a>
  
</span>


  </span>

  
</article>

            </div>
          </div>
        
          
          <div class="row">
            <div class="col-md-offset-3 col-md-6">
              <article>
  <h2><a href="/blog/2015/08/24/know-what-not-to-build-droidcon-2015/">Know What (Not) to Build (Droidcon 2015)</a></h2>
  
  <p>
    <h3>Talk I had given on <a href="https://events.bizzabo.com/droidcontlv2015/agenda/session/106642">Droidcon 2015</a></h3>




<p>[slideshare id=49175997&amp;doc=knowwhatnottobuild2-150609142509-lva1-app6892]</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2015-08-24T15:18:40+03:00" pubdate data-updated="true"></time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/android/'>android</a>, <a class='category' href='/blog/categories/posts/'>posts</a>
  
</span>


  </span>

  
</article>

            </div>
          </div>
        
          
          <div class="row">
            <div class="col-md-offset-3 col-md-6">
              <article>
  <h2><a href="/blog/2015/08/24/android-ui-tips-tricks-droidcon-2014/">Android Ui Tips & Tricks (Droidcon 2014)</a></h2>
  
  <p>
    <h3>Talk I had given on <a href="http://il.droidcon.com/2014/agenda/">Droidcon 2014</a></h3>




<p>[slideshare id=35795002&amp;doc=androiduitipstricks-140612090259-phpapp02]</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2015-08-24T15:04:46+03:00" pubdate data-updated="true"></time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/android/'>android</a>, <a class='category' href='/blog/categories/posts/'>posts</a>
  
</span>


  </span>

  
</article>

            </div>
          </div>
        
          
          <div class="row">
            <div class="col-md-offset-3 col-md-6">
              <article>
  <h2><a href="/blog/2015/08/06/custom-view-part-2/">Custom View- Part 2</a></h2>
  
  <p>
    <h5><em>In <a href="https://shem8.wordpress.com/2015/07/31/custom-view-part-1/">part 1</a> we learned how to build a simple custom view that&rsquo;s integrate nicely with our pager view and show some indication about the current page, in this post we&rsquo;ll take the view to the next level and add some subviews for page headers</em></h5>




<hr />




<p>So we have simple nice looking pager indicator that animate smoothly when moving between tabs, but it&rsquo;s still missing some info about the tabs- something like the pages titles. So we&rsquo;ll add some subviews as the page titles and make them a bit interactive to show the selected page.
Why I plan to use subviews instead of just drawing the text straight on the canvas?</p>




<ul>
<li><p>When drawing text you need to handle the text position, text size line breaking etc&hellip; Lets focus on building the view and let Android save us time by using TextView.</p></li>
<li><p>When using subview we also save code on handling click events.</p></li>
<li><p>By adding subviews we make ourselves use ViewGroup and learn how to handle layout and measure parent and child views, and we&rsquo;re all here to learn right? =)</p></li>
</ul>




<h1>0. Setup</h1>




<p>Let make our PagerIndicatorView to extends ViewGroup so we&rsquo;ll be able to add sub views:</p>




<p>[code language=&ldquo;java&rdquo;]
public class PagerIndicatorView extends ViewGroup {
[/code]</p>




<p>Here is some tricky part that first I&rsquo;ve been waste couple of good hours debugging: view groups are usually not showing real UI, it just contains sub views and responsible to arrange them in the right order and layout, So by default the onDraw is skipped for ViewGroup. That&rsquo;s not the case for our view, so we need to disable it:</p>




<p>[code language=&ldquo;java&rdquo;]
public void init() {
    &hellip;
    setWillNotDraw(false);
}
[/code]</p>




<p>That&rsquo;s it, our view is now officially became a ViewGroup and we&rsquo;re able to add it child views</p>




<h1>1. Add the child views</h1>




<p>Lets add the page titles, it will be a simple TextViews with the numbers:</p>




<p>[code language=&ldquo;java&rdquo;]
public void init() {
    &hellip;
    addView(getTextView(&ldquo;1&rdquo;));
    addView(getTextView(&ldquo;2&rdquo;));
    addView(getTextView(&ldquo;3&rdquo;));
    addView(getTextView(&ldquo;4&rdquo;));
}</p>




<p>private TextView getTextView(String text) {
    TextView v = new TextView(getContext());
    v.setText(text);
    v.setTextSize(30);
    v.setGravity(Gravity.CENTER);
    return v;
}
[/code]</p>




<p>Now it&rsquo;s the time for putting the text views in the right position and size inside the view.</p>




<p>First lets start by setting them the right size- each text view should be &frac14; from the view width and the same as the view height. The measurement mechanism in view is done in the <a href="http://developer.android.com/reference/android/view/View.html#onMeasure(int,%20int">onMeasure</a>) method and it is a bit tricky- uses something called <a href="http://developer.android.com/reference/android/view/View.MeasureSpec.html">measure spec</a>. I would recommend you to read about it, but it basically define the size and the mode of the view. For easy handling it- the framework supply the developers couple of helper methods for reading and creating specs:</p>




<p>[code language=&ldquo;java&rdquo;]
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    final int width = getDefaultSize(getSuggestedMinimumWidth(), widthMeasureSpec);
    final int childWidth = width / 4;
    final int height = getDefaultSize(getSuggestedMinimumHeight(), heightMeasureSpec);
    for (int i = 0; i &amp;lt; getChildCount(); i++) {
        getChildAt(i).measure(View.MeasureSpec.makeMeasureSpec(childWidth, View.MeasureSpec.EXACTLY), View.MeasureSpec.makeMeasureSpec(height, View.MeasureSpec.EXACTLY));
    }
    setMeasuredDimension(width, height);
}
[/code]</p>




<p>Now for positioning the child views in the right places, this is done in the <a href="http://developer.android.com/reference/android/view/View.html#onLayout(boolean,%20int,%20int,%20int,%20int">onLayout</a>) method, we&rsquo;ll just go over the child views and position each child in the right offset:</p>




<p>[code language=&ldquo;java&rdquo;]
@Override
protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
    final int childW = (right - left) / 4;
    final int childH = (bottom - top);
    for (int i = 0; i &amp;lt; getChildCount(); i++) {
        getChildAt(i).layout(i * childW, 0, (i + 1) * childW, childH);
    }
}
[/code]</p>




<p>Now you should get something like this:</p>




<p><a href="https://shem8.files.wordpress.com/2015/08/screen.png"><img src="https://shem8.files.wordpress.com/2015/08/screen-e1438861347399.png" alt="screen" /></a></p>




<h1>2. Interactive</h1>




<p>So we have titles for all pages, but how about make it clear which page is selected (beside the background color I mean)? Lets make out view a little bit more interactive, cause you now what the say- god is in the details.</p>




<p>We want to make the texts enlarge and be for strong when scrolling to the page:</p>




<p>[code language=&ldquo;java&rdquo;]
@Override
protected void onDraw(Canvas canvas) {
    &hellip;
    for (int i = 0; i &amp;lt; getChildCount(); i++) {
        final View view = getChildAt(i);
        if (i == index) {
            view.setScaleX(1 - Math.abs(prec) * 0.3f);
            view.setScaleY(1 - Math.abs(prec) * 0.3f);
            view.setAlpha(1 - Math.abs(prec) * 0.5f);
        } else if (i == index + 1) {
            view.setScaleX(0.7f + Math.abs(prec) * 0.3f);
            view.setScaleY(0.7f + Math.abs(prec) * 0.3f);
            view.setAlpha(0.5f + Math.abs(prec) * 0.5f);
        } else {
            view.setScaleX(0.7f);
            view.setScaleY(0.7f);
            view.setAlpha(0.5f);
        }
    }
}
[/code]</p>




<p>And wallah:</p>




<p><a href="https://shem8.files.wordpress.com/2015/08/final.gif"><img src="https://shem8.files.wordpress.com/2015/08/final.gif" alt="final" /></a></p>




<hr />




<h3>You can find the whole code in my <a href="https://github.com/shem8/customviewpager">git repository</a>, have fun!</h3>


  </p>
  <span class="meta">
    written 








  



<time datetime="2015-08-06T15:15:11+03:00" pubdate data-updated="true"></time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/android/'>android</a>, <a class='category' href='/blog/categories/posts/'>posts</a>
  
</span>


  </span>

  
</article>

            </div>
          </div>
        
          
          <div class="row">
            <div class="col-md-offset-3 col-md-6">
              <article>
  <h2><a href="/blog/2015/07/31/custom-view-part-1/">Custom View- Part 1</a></h2>
  
  <p>
    <p>Until couple of months ago I&rsquo;ve been a bit afraid writing custom views. I thought it&rsquo;s too complicated and had a lot of overhead with handling all layouting and interactions, I felt there is not enough documentation out there, not mention the edge cases and performance. I had my default Android view component in my toolbox and thought that everything I needed can be composed from those.</p>




<p>The last part is true for most cases. Most of Android apps can be built only with the basic layouts and views out there, so why do we still need to build custom views sometimes?</p>




<ol>
<li><p>Performance- especially for very complicated views in a list. For this I would recommend you to read the great post by the legendary Lucas Rocha: <a href="http://lucasr.org/2014/05/12/custom-layouts-on-android/">Custom Layouts on Android</a></p></li>
<li><p>Unique looking views with some specific ui, drawing, interactions or animation.</p></li>
</ol>




<p>This post (and the later one) will focus on the 2nd point, we&rsquo;ll try to build some custom tab indicator that eventually look will like this:<img src="https://shem8.files.wordpress.com/2015/07/step35.gif" alt="step3" /></p>




<p>So ennough talking, lets get into code</p>




<h1>0. Setup</h1>




<p>We&rsquo;ll create a simple application with pager and our pager indicator (that for now just will be an empty view):</p>




<p>activity_main.xml:</p>




<p>[code language=&ldquo;xml&rdquo;]
&lt;LinearLayout xmlns:android=&ldquo;<a href="http://schemas.android.com/apk/res/android">http://schemas.android.com/apk/res/android</a>&rdquo;
    android:layout_width=&ldquo;match_parent&rdquo;
    android:layout_height=&ldquo;match_parent&rdquo;
    android:orientation=&ldquo;vertical&rdquo;&gt;</p>




<pre><code>&amp;lt;android.support.v4.view.ViewPager
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"/&amp;gt;

&amp;lt;shem.customviewpager.PagerIndicatorView
    android:id="@+id/indicator"
    android:layout_width="match_parent"
    android:layout_height="50dp" /&amp;gt;
</code></pre>




<p>&lt;/LinearLayout&gt;
[/code]</p>




<p>MainActivity.java:</p>




<p>[code language=&ldquo;java&rdquo;]
public class MainActivity extends AppCompatActivity {</p>




<pre><code>private ViewPager mPager;
private PagerAdapter mPagerAdapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    final PagerIndicatorView indicator = (PagerIndicatorView) findViewById(R.id.indicator);
    mPager = (ViewPager) findViewById(R.id.pager);
    mPagerAdapter = new ScreenSlidePagerAdapter(getSupportFragmentManager());
    mPager.setAdapter(mPagerAdapter);
}

private class ScreenSlidePagerAdapter extends FragmentStatePagerAdapter {
    public ScreenSlidePagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        return TextFragment.newInstance(position + "");
    }

    @Override
    public int getCount() {
        return 4;
    }
}
</code></pre>




<p>}
[/code]</p>




<p>TextFragment.java:</p>




<p>[code language=&ldquo;java&rdquo;]
public class TextFragment extends Fragment {
        private static final String TEXT_KEY = &ldquo;TEXT&rdquo;;</p>




<pre><code>public static TextFragment newInstance(String text) {
    TextFragment f = new TextFragment();
    Bundle arg = new Bundle();
    arg.putString(TEXT_KEY, text);
    f.setArguments(arg);
    return f;
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.text_fragment, container, false);
    String text = getArguments().getString(TEXT_KEY);
    ((TextView)view.findViewById(R.id.textView)).setText(text);
    return view;
}
</code></pre>




<p>}
[/code]</p>




<p>PagerIndicatorView.java:</p>




<p>[code language=&ldquo;java&rdquo;]
public class PagerIndicatorView extends View {</p>




<pre><code>public PagerIndicatorView(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
}

public void init() {
    //Gonna init things for view here soon
}
</code></pre>




<p>}
[/code]</p>




<h1>1. Simple indicator</h1>




<p>Lets start with putting some indication in the view about where we are in the pager.</p>




<p>So first we gonna create the Paint object that gonna be used for drawing, we&rsquo;ll use a simple solid color for now. We pre create it in the init method because it prefer no to allocate object in the onDraw method, because it gonna be called a lot.</p>




<p>[code language=&ldquo;java&rdquo;]
    public void init() {
        paint = new Paint();
        paint.setColor(Color.LTGRAY);
    }
[/code]</p>




<p>Now we about to draw the indicator in the right place in the view, remember that we&rsquo;re using a 4 items in the pager- so the width should be &frac14; of the canvas width:</p>




<p>[code language=&ldquo;java&rdquo;]
    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        canvas.drawRect((index) * canvas.getWidth() / 4, 0, (1 + index) * canvas.getWidth() / 4, canvas.getHeight(), paint);
    }
[/code]</p>




<p>Now we just need to update the view index and redraw it every time pager is changing:</p>




<p>In PagerIndicatorView:</p>




<p>[code language=&ldquo;java&rdquo;]
    public void setProgress(int index) {
        this.index = index;
        invalidate();
    }
[/code]</p>




<p>In MainActivity:</p>




<p>[code language=&ldquo;java&rdquo;]
    mPager.addOnPageChangeListener(new ViewPager.OnPageChangeListener() {
            @Override
            public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
                indicator.setProgress(position);
            }
        });
[/code]</p>




<p><img src="https://shem8.files.wordpress.com/2015/07/step15.gif" alt="step1" /></p>




<h1>2. Make it smooth</h1>




<p>So the indication works great but it just jump when we move from page to page, we would like it to be more smooth and indicate the real position when we move.
For this we need to pass the position offset when the page scrolled and change a bit the calculation when drawing:</p>




<p>[code language=&ldquo;java&rdquo;]
    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        canvas.drawRect((index + prec) * canvas.getWidth() / 4, 0, (1 + index + prec) * canvas.getWidth() / 4, canvas.getHeight(), paint);
    }</p>




<pre><code>public void setProgress(int index, float prec) {
    this.index = index;
    this.prec = prec;
    invalidate();
}
</code></pre>




<p>[/code]</p>




<h1><img src="https://shem8.files.wordpress.com/2015/07/step25.gif" alt="step2" /></h1>




<h1>3. Bring it to life</h1>




<p>So now the view works well but it looks a bit boring, how about making it a bit more colorful?
Let start by setting 4 colors- one for each tab:</p>




<p>[code language=&ldquo;java&rdquo;]
        colors = new int[] {Color.parseColor(&ldquo;#FFD600&rdquo;),
                Color.parseColor(&ldquo;#FF6D00&rdquo;),
                Color.parseColor(&ldquo;#0091EA&rdquo;),
                Color.parseColor(&ldquo;#64DD17&rdquo;)};
[/code]</p>




<p>Now we need to get the right color to set when moving from color to color, for this we have a utiliy method that can calculate the right color while moving:</p>




<p>[code language=&ldquo;java&rdquo;]</p>




<pre><code>@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    paint.setColor(evaluateColor(prec, colors[index], colors[Math.min(index + 1, colors.length - 1)]));
    canvas.drawRect((index + prec) * canvas.getWidth() / 4, 0, (1 + index + prec) * canvas.getWidth() / 4, canvas.getHeight(), paint);
}

public static int evaluateColor(float fraction, int startInt, int endInt) {
    int startA = (startInt &amp;gt;&amp;gt; 24) &amp; 0xff;
    int startR = (startInt &amp;gt;&amp;gt; 16) &amp; 0xff;
    int startG = (startInt &amp;gt;&amp;gt; 8) &amp; 0xff;
    int startB = startInt &amp; 0xff;

    int endA = (endInt &amp;gt;&amp;gt; 24) &amp; 0xff;
    int endR = (endInt &amp;gt;&amp;gt; 16) &amp; 0xff;
    int endG = (endInt &amp;gt;&amp;gt; 8) &amp; 0xff;
    int endB = endInt &amp; 0xff;

    return (int)((startA + (int)(fraction * (endA - startA))) &amp;&amp; 24) |
            (int)((startR + (int)(fraction * (endR - startR))) &amp;&amp; 16) |
            (int)((startG + (int)(fraction * (endG - startG))) &amp;&amp; 8) |
            (int)((startB + (int)(fraction * (endB - startB))));
}
</code></pre>




<p>[/code]</p>




<p><img src="https://shem8.files.wordpress.com/2015/07/step35.gif" alt="step3" /></p>




<p>That&rsquo;s it, look like we have some nice looking indicator, in the <a href="https://shem8.wordpress.com/2015/08/06/custom-view-part-2/">next post</a> we&rsquo;ll add some sub views with tab titles, so stay tuned =)</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2015-07-31T15:40:17+03:00" pubdate data-updated="true"></time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/android/'>android</a>, <a class='category' href='/blog/categories/posts/'>posts</a>
  
</span>


  </span>

  
</article>

            </div>
          </div>
        
          
          <div class="row">
            <div class="col-md-offset-3 col-md-6">
              <article>
  <h2><a href="/blog/2015/07/17/the-basic-android-stuff-that-no-one-tells-you/">The Basic Android Stuff That Nobody Talks About</a></h2>
  
  <p>
    <p>I started developing for Android 3 years ago. I was never really formally taught - no ‘real’ classes, no online courses. I did what I usually doing when I’m trying to learn a new thing - figure things out through trial and error. I downloaded the SDK and started tweaking and playing with things around while reading the Android developer guide.</p>




<p>It seemed pretty straight forward and I was able to publish a real app after couple of days of playing with things. The app, <a href="https://play.google.com/store/apps/details?id=org.bill.splitter">Bill Splitter</a>, was super simple - it helped you split your bill while you were out dining with friends at a restaurant. Looked terrible, but hey, it worked! That was 3 years ago and since then I’ve gotten much better in Android and learnt tons of new of things (but I definitely still have a lot more to learn).</p>




<p>A couple of weeks ago I got a mail from someone about Bill Splitter. He wanted to request a new feature and report some bugs that he experienced. I was a little surprised that someone still uses the app, but I was so happy that he actually contacted me that I wanted to solve the issues right away. I figured that that given how far I’ve come in my Android skillz, this should be quick.</p>




<p>So, I pulled the code and I immediately gasped in horror when I saw the atrocity of a code the lay out in front of me. It wasn’t your classic n00b mistakes, it seemed even worse, I was severly lacking in the understanding and implementation of some basic Android concepts. Not the usual things like activity, fragment, or how to write basic layouts - all of these are covered in the API guide. It’s more like how to write smart code and design patterns that I needed to discover myself (and looks like many others, like me, needed to discover on by their own).</p>




<p>So, this blog post is dedicated to me, but 5 years ago. We’ll talk about patterns from the Android platform that nobody talks about:</p>




<h1>1. API from the fragment to the activity</h1>




<p>The API from the activity to the fragment is pretty easy because the activity can hold the fragment reference (after adding it within transaction or getting it from layout). But what about the  exact opposite? Here is how every fragment I create looks like:</p>




<p>[code language=&ldquo;java&rdquo;]
public class MyFragment extends Fragment {</p>




<pre><code>public interface MyFragmentListener {
    //your api here
}

private MyFragmentListener listener;

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
    listener = (MyFragmentListener) activity;
}
</code></pre>




<p>}
[/code]</p>




<h1>2. Context</h1>




<p>Context can be described as the app environment or state.The context is needed quite often to do all kinds of things in your code, starting from creating views or getting system services. Context is also the easiest way to leak memory, so you should really be careful with it! Now, If we have a couple of different contexts - which one should I use?</p>




<p>Dave Smith publish a great <a href="https://possiblemobile.com/2013/06/context/">post</a> about it, but let me summarize it for you:</p>




<ul>
<li><p>If you need to save the reference for a latter use, probably for some background not-ui-related task (for example, update the shared preference)- you should use the <strong>App</strong> context.</p></li>
<li><p>For all other cases- use the <strong>Activity</strong> context.</p></li>
</ul>




<p>That&rsquo;s it.</p>




<h1>3. Creating new fragment</h1>




<p>If I want to create a new fragment, how should I pass argument to it? Create helper method to create an instance:</p>




<p>[code language=&ldquo;java&rdquo;]
public class MyFragment extends Fragment {
    private static final String INT_KEY = &ldquo;INT&rdquo;;
    private static final String STRING_KEY = &ldquo;STRING&rdquo;;</p>




<pre><code>public static MyFragment newInstance(int intArg, String stringArg) {
    MyFragment f = new MyFragment();
    Bundle arg = new Bundle();
    arg.putInt(INT_KEY, intArg);
    arg.putString(STRING_KEY, stringArg);
    f.setArguments(arg);
    return f;
}

@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);
    int arg1 = getArguments().getInt(INT_KEY);
    String arg2 = getArguments().getString(STRING_KEY);
}
</code></pre>




<p>}
[/code]</p>




<h1>4. Saved instance</h1>




<p>Lots of Android developers ignore the saved instance on the activity (or fragment). Saved instance is super important to the user experience (How bad would it be if all of your form was reset just because you checked your Whatsapp message?).</p>




<p>First, lets start with the good news- Android would do most of the work for you. If you want to save the view state, just put <strong>android:id</strong> attribute to the view. Other than that, your activity (or fragment) should be look something like that:</p>




<p>[code language=&ldquo;java&rdquo;]
@Override
public void onViewCreated(View view, @Nullable Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);</p>




<pre><code>if (savedInstanceState == null) {
    //first time this showing, do your animation/ default values here
} else {
    //restore state
}
</code></pre>




<p>}
[/code]</p>




<h1>5. Debug mode</h1>




<p>When developing your app you want to work on a separate version of your app. Off the top of my head I can quickly think of 2 reasons why:</p>




<ol>
<li><p>You don&rsquo;t want to dirty your real app data.</p></li>
<li><p>If you&rsquo;re like me, most of your apps are independent, small, utilities or games, that probably won&rsquo;t be a big hit at first. Thats means that your analytics will contain a lot of session from your side and few from real users, what make it very hard to measure.</p></li>
</ol>




<p>Android and gradle make it really easy to create a new app when developing, using <em>buildTypes, </em>so just put a suffix to your debug build type and it won&rsquo;t override the real app:</p>




<p>[code]
buildTypes {
    release {
    }</p>




<pre><code>debug {
    applicationIdSuffix ".debug"
}
</code></pre>




<p>}
[/code]</p>




<p>Please note that it will create 2 instances of your app that you won&rsquo;t able to detect which on is the debug in which one is the real (the latter one in the applications list is the debug btw), so you can create a separate strings.xml file in debug with app_name for debug.</p>




<hr />




<p>That’s it. Hope the past-me (aka youngin’ Shem) was able to learn some good tricks. Hopefully I was able to save you some time as well with some of these tricks.</p>




<p>Question to you: Do you have other design patterns or tricks that are worth mentioning here? I would love to read them in comments. Let me know!</p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2015-07-17T16:30:52+03:00" pubdate data-updated="true"></time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/android/'>android</a>, <a class='category' href='/blog/categories/posts/'>posts</a>
  
</span>


  </span>

  
</article>

            </div>
          </div>
        
          
          <div class="row">
            <div class="col-md-offset-3 col-md-6">
              <article>
  <h2><a href="/blog/2015/07/10/dont-touch-my-child-view/">Don't Touch My Child (View)!</a></h2>
  
  <p>
    <hr />




<p>A few days ago I’ve struggling with some bug someone reported about one my apps- <a href="https://play.google.com/store/apps/details?id=shem.getit">ripples</a>.</p>




<p>A little background about the app- it’s an interactive game where ripples appear randomly on the screen and the user need to pop them out by touching them for couple of seconds.</p>




<p><img src="https://d262ilb51hltx0.cloudfront.net/max/800/1*jxjAMG3FfKvvnb4KY5r14w.gif" alt="" />The bug was happen when we touch first the parent view and then the ripple view. As you can see in the example above, the user touch the background and then when the ripple appear and the user try to touch it- touch events on the ripple view are disabled.</p>




<p>In a game like this, where interactions are critical part of the game, it’s a must-fix bug.</p>




<p>BTW- multi-touch is supported in the game, if you touch in the same view or touch 2 ripples views, it works fine. Problem start happen only when the parent view is getting on the touches.</p>




<hr />




<h4>So let’s start diving into the problem</h4>




<p>First- let’s get to know the views we’re handling with and the key methods we need to know when handling with touch events.</p>




<p>The parent view is just simple RelativeLayout that wasn’t changed in any way:</p>




<pre><code>public class &lt;strong class="markup--strong markup--pre-strong"&gt;MyRelativeLayout&lt;/strong&gt; extends &lt;strong class="markup--strong markup--pre-strong"&gt;RelativeLayout&lt;/strong&gt; {&lt;em class="markup--em markup--pre-em"&gt;
  //Nothing here for now.
&lt;/em&gt;}
</code></pre>




<p>The ripple view is a little more complicated but for simplicity I stripped out all the unrelated code:</p>




<pre><code>public class &lt;strong class="markup--strong markup--pre-strong"&gt;RippleGameView&lt;/strong&gt; extends &lt;strong class="markup--strong markup--pre-strong"&gt;FrameLayout&lt;/strong&gt; {
  @Override
  public boolean &lt;strong class="markup--strong markup--pre-strong"&gt;onTouchEvent&lt;/strong&gt;(MotionEvent event) {
&lt;em class="markup--em markup--pre-em"&gt;    //Handle the user touches according to the game state&lt;/em&gt;
  }
}
</code></pre>




<p>The problem is that the <strong>onTouchEvent </strong>in the child view not called when touches happen in the parent view, the one that responsible for calling <strong>onTouchEvent </strong>is <strong>dispatchTouchEvent </strong>in the parent view.</p>




<p>A quick look on the dispatchTouchEvent method in the RelativeLayout source code (the implementation is actually in the GroupView) gonna show us a really-terrifying-long-and-generic-code-for-all-states (But we can still learn from it a lot, and I recommend you to read as much code of the android platform as possible). The code actually contains handling touch in sub-views and check their states and visibility, it contains some listeners and handling sequences of touches, it checking again list of touches it has and update them.</p>




<h4>Bottom line- this code doing a lots of things that we <strong><em>know</em></strong> that is unnecessary in our case.</h4>




<p>That’s why we can implement our own version that’s gonna act like we wanted, it’s suppose to be something like this:</p>




<pre><code>@Override
public boolean &lt;strong class="markup--strong markup--pre-strong"&gt;dispatchTouchEvent&lt;/strong&gt;(MotionEvent ev) {
&lt;em class="markup--em markup--pre-em"&gt;    //Get the touch position&lt;/em&gt;
    int actionIndex = ev.getActionIndex();
    final float x = ev.getX(actionIndex);
    final float y = ev.getY(actionIndex);

&lt;em class="markup--em markup--pre-em"&gt;    //Iterate over child view and search for the right child that should handle this touch event&lt;/em&gt;
    for (int i = getChildCount() - 1; i &gt;= 0; i--) {
        View child = getChildAt(i);
        if (!&lt;em class="markup--em markup--pre-em"&gt;canViewReceivePointerEvents&lt;/em&gt;(child) ||
            !isTransformedTouchPointInView(x, y, child, null)) {
            continue;
        }&lt;em class="markup--em markup--pre-em"&gt;        
        //Set the right position for the touch, related to child position, and let it handle the touch event.&lt;/em&gt;
        dispatchTransformedTouchEvent(ev, false, child);
    }
    return true;
}
</code></pre>




<p>As you can guess, this code and the helper methods are brutally copied, with some simplifications, from ViewGroup source code (WHY doesn’t it protected dear android devs?!).</p>




<p>And the result:</p>




<p><img src="https://d262ilb51hltx0.cloudfront.net/max/800/1*hkSUnobyZD3cC01mGTzh7w.gif" alt="" /></p>


  </p>
  <span class="meta">
    written 








  



<time datetime="2015-07-10T14:47:10+03:00" pubdate data-updated="true"></time>
    

in
<span class="categories">
  
    <a class='category' href='/blog/categories/android/'>android</a>, <a class='category' href='/blog/categories/posts/'>posts</a>
  
</span>


  </span>

  
</article>

            </div>
          </div>
        
      </div>
    </div>

    <hr class="divider-short"/>

    <div class="archive-link">
      <h3><a href="/posts/">All Posts</a></h3>
    </div>
  </div>
</div>

    <footer id="footer" class="her-row">
  <div class="container">
    <div class="row">
      <div class="col-md-1">
  <a href="/"><h4>Home</h4></a>
</div>

<div class="col-md-2">
  <div class="social-icon-list">
    
    <a href="https://twitter.com/shemag8"><img src="/images/glyphicons_social_31_twitter.png"/></a>
    

    
    <a href="https://github.com/shem8"><img src="/images/glyphicons_social_21_github.png"/></a>
    

    

    
  </div>
</div>

<div class="pull-right">
  <h4>Powered by <a href="http://octopress.org/">Octopress</a>. Designed by <a href="http://AdrianArtiles.com">Adrian Artiles</a>.</h4>
</div>


    </div>
  </div>
</footer>

    
  </body>
</html>
